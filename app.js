const pages = document.querySelectorAll('.page'), navLinks = document.querySelectorAll('.nav-links li'), mobileMenuBtn = document.querySelector('.mobile-menu-btn'), navLinksContainer = document.querySelector('.nav-links'), modal = document.getElementById('write-modal'), toast = document.getElementById('toast'), ICONS = { user: '<svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>' }; let currentPosts = []; document.addEventListener('DOMContentLoaded', () => { initNavigation(); loadContent() }); function initNavigation() { navLinks.forEach(e => { e.addEventListener('click', () => { let t = e.getAttribute('data-target'); navigateTo(t), window.innerWidth <= 768 && navLinksContainer.classList.remove('active') }) }), mobileMenuBtn.addEventListener('click', () => { navLinksContainer.classList.toggle('active') }), document.querySelector('.close-modal').addEventListener('click', () => { modal.classList.remove('show') }), window.addEventListener('click', e => { e.target === modal && modal.classList.remove('show') }), document.getElementById('signup-form').addEventListener('submit', e => { e.preventDefault(), showToast('가입 신청 완료!'), e.target.reset() }), document.getElementById('write-form').addEventListener('submit', e => { e.preventDefault(); let t = e.target.querySelector('input').value, n = e.target.querySelector('textarea').value; addPost(t, n), modal.classList.remove('show'), showToast('게시글 등록 완료'), e.target.reset() }) } function navigateTo(e) { navLinks.forEach(t => { t.getAttribute('data-target') === e ? t.classList.add('active') : t.classList.remove('active') }), pages.forEach(t => { t.id === e ? t.classList.add('active') : t.classList.remove('active') }), window.scrollTo(0, 0) } async function loadContent() { DEMO_MODE && (loadMockGallery(), loadMockCommunity()) } function loadMockGallery() { let e = document.getElementById('gallery-container'); e.innerHTML = '';[{ url: 'https://picsum.photos/300/300?random=1', title: '체육대회' }, { url: 'https://picsum.photos/300/300?random=2', title: '현장학습' }, { url: 'https://picsum.photos/300/300?random=3', title: '급식실' }, { url: 'https://picsum.photos/300/300?random=4', title: '쉬는 시간' }, { url: 'https://picsum.photos/300/300?random=5', title: '과학실' }, { url: 'https://picsum.photos/300/300?random=6', title: '방과후' }].forEach(t => { let n = document.createElement('div'); n.className = 'gallery-item', n.innerHTML = `<img src="${t.url}" alt="${t.title}" loading="lazy"><div class="gallery-overlay"><h4>${t.title}</h4></div>`, e.appendChild(n) }) } function loadMockCommunity() { let e = document.getElementById('community-container'); 0 === currentPosts.length && (currentPosts = [{ id: 1, title: '이번 주 주번 공지', author: '김철수', date: '2026-03-15', content: '칠판 지우개 확인하자.' }, { id: 2, title: '수학 숙제 질문', author: '이영희', date: '2026-03-14', content: '34페이지 5번 문제.' }, { id: 3, title: '체육복 챙기기', author: '반장', date: '2026-03-13', content: '내일 잊지마!' }]), renderPosts() } function renderPosts() { let e = document.getElementById('community-container'); if (e.innerHTML = '', 0 === currentPosts.length) { e.innerHTML = '<div class="empty-state"><p>게시글이 없습니다.</p></div>'; return } currentPosts.forEach(t => { let n = document.createElement('div'); n.className = 'community-item', n.innerHTML = `<h4>${t.title}</h4><div class="meta"><span>${ICONS.user} ${t.author}</span> &bull; <span>${t.date}</span></div><p style="margin-top: 10px; color: var(--text-light); font-size: 0.95rem;">${t.content}</p>`, e.appendChild(n) }) } function addPost(e, t) { let n = { id: Date.now(), title: e, author: '익명', date: (new Date).toISOString().split('T')[0], content: t }; currentPosts.unshift(n), renderPosts() } function openWriteModal() { modal.classList.add('show') } function showToast(e) { let t = document.getElementById('toast-message'); t.textContent = e, toast.classList.add('show'), setTimeout(() => { toast.classList.remove('show') }, 3e3) }
